pipeline {
      environment {
        registry = "sai3000/petzyvet"
        registryCredential = "1"
        dockerImage = ''
    }
   agent any
   stages {   
 

          
       stage ('Build Docker image') {
            steps {
                script{
                    dockerImage = docker.build registry + ":$BUILD_NUMBER"
                }  
            }
        }


       stage('Push docker image'){
          steps{
            echo "Pushing docker image"
            script{
               docker.withRegistry('',registryCredential) {
                  dockerImage.push()
                  dockerImage.push('latest')
                                }
             }
               }
            }

     



   }


}